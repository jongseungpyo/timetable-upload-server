<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‹œê°„í‘œ ì œì¶œ - íƒ€ì„ë¹Œë”</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #f8fafc; }
        
        .header { background: white; box-shadow: 0 1px 3px rgba(0,0,0,0.1); padding: 1rem 0; }
        .header-content { max-width: 1200px; margin: 0 auto; padding: 0 2rem; display: flex; align-items: center; }
        .logo { font-size: 1.5rem; font-weight: bold; color: #2563eb; }
        
        .container { max-width: 800px; margin: 2rem auto; padding: 0 2rem; }
        .card { background: white; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); padding: 2rem; margin-bottom: 2rem; }
        
        h1 { color: #1e293b; margin-bottom: 0.5rem; font-size: 2rem; }
        .subtitle { color: #64748b; margin-bottom: 2rem; font-size: 1.1rem; }
        
        .form-group { margin-bottom: 1.5rem; }
        label { display: block; margin-bottom: 0.5rem; color: #374151; font-weight: 500; }
        input, textarea, select { width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 6px; font-size: 1rem; }
        input:focus, textarea:focus, select:focus { outline: none; border-color: #2563eb; box-shadow: 0 0 0 3px rgba(37,99,235,0.1); }
        
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
        
        .upload-area { border: 2px dashed #cbd5e0; border-radius: 8px; padding: 3rem 2rem; text-align: center; transition: all 0.3s; }
        .upload-area:hover { border-color: #2563eb; background: #f8faff; }
        .upload-area.dragover { border-color: #2563eb; background: #eff6ff; }
        .upload-icon { font-size: 3rem; margin-bottom: 1rem; }
        
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 6px; font-size: 1rem; cursor: pointer; transition: all 0.3s; }
        .btn-primary { background: #2563eb; color: white; }
        .btn-primary:hover { background: #1d4ed8; }
        .btn-secondary { background: #6b7280; color: white; }
        .btn-secondary:hover { background: #4b5563; }
        
        .progress { margin-top: 1rem; display: none; }
        .progress-bar { width: 100%; height: 8px; background: #e5e7eb; border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: #2563eb; transition: width 0.3s; animation: pulse 2s infinite; }
        
        .alert { padding: 1rem; border-radius: 6px; margin: 1rem 0; }
        .alert-success { background: #dcfce7; border: 1px solid #bbf7d0; color: #166534; }
        .alert-error { background: #fef2f2; border: 1px solid #fecaca; color: #dc2626; }
        .alert-info { background: #dbeafe; border: 1px solid #bfdbfe; color: #1d4ed8; }
        
        .requirements { background: #f8fafc; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem; }
        .req-title { font-weight: 600; margin-bottom: 1rem; color: #374151; }
        .req-list { list-style: none; }
        .req-list li { padding: 0.25rem 0; color: #6b7280; }
        .req-list li::before { content: "âœ“"; color: #10b981; margin-right: 0.5rem; font-weight: bold; }
        
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        
        .footer { text-align: center; padding: 2rem; color: #9ca3af; font-size: 0.9rem; }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="logo">ğŸ« íƒ€ì„ë¹Œë” - ì‹œê°„í‘œ ì œì¶œ</div>
        </div>
    </div>
    
    <div class="container">
        <div class="card">
            <h1>ì‹œê°„í‘œ ë°ì´í„° ì œì¶œ</h1>
            <p class="subtitle">í•™ì›/ê°•ì‚¬ë‹˜ì˜ ê°•ì˜ ì‹œê°„í‘œë¥¼ ì œì¶œí•´ì£¼ì„¸ìš”. ê²€í†  í›„ ì•±ì— ë°˜ì˜ë©ë‹ˆë‹¤.</p>
            
            <div class="requirements">
                <div class="req-title">ğŸ“‹ ì œì¶œ ìš”êµ¬ì‚¬í•­</div>
                <ul class="req-list">
                    <li>CSV íŒŒì¼ í˜•ì‹ìœ¼ë¡œ ì œì¶œ (Excelì—ì„œ "ë‹¤ë¥¸ ì´ë¦„ìœ¼ë¡œ ì €ì¥" â†’ CSV ì„ íƒ)</li>
                    <li>ê°•ì‚¬ëª…, ê³¼ëª©, ëŒ€ìƒ í•™êµ, ì£¼ì œ, ì¶œê°• í•™ì› ë“± í•„ìˆ˜ ì •ë³´ í¬í•¨</li>
                    <li>ì‹œê°„í‘œëŠ” ì¼ì£¼ì¼ ë‹¨ìœ„ë¡œ ì‘ì„± (ì¼ìš”ì¼~í† ìš”ì¼)</li>
                    <li>ì—°ë½ì²˜ëŠ” ê²€í†  ê³¼ì •ì—ì„œë§Œ ì‚¬ìš©ë˜ë©° ì™¸ë¶€ ê³µê°œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤</li>
                </ul>
            </div>
            
            <form id="submitForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="academyName">í•™ì›/ê¸°ê´€ëª… *</label>
                        <input type="text" id="academyName" name="academyName" required>
                    </div>
                    <div class="form-group">
                        <label for="instructorName">ë‹´ë‹¹ ê°•ì‚¬ëª…</label>
                        <input type="text" id="instructorName" name="instructorName">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="contactName">ì—°ë½ë‹´ë‹¹ì *</label>
                        <input type="text" id="contactName" name="contactName" required>
                    </div>
                    <div class="form-group">
                        <label for="phone">ì—°ë½ì²˜ *</label>
                        <input type="tel" id="phone" name="phone" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="email">ì´ë©”ì¼</label>
                    <input type="email" id="email" name="email">
                </div>
                
                <div class="form-group">
                    <label for="notes">ì°¸ê³ ì‚¬í•­</label>
                    <textarea id="notes" name="notes" rows="3" placeholder="íŠ¹ë³„í•œ ìš”ì²­ì‚¬í•­ì´ë‚˜ ì°¸ê³ í•  ë‚´ìš©ì´ ìˆìœ¼ì‹œë©´ ì ì–´ì£¼ì„¸ìš”"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="csvFile">ì‹œê°„í‘œ CSV íŒŒì¼ *</label>
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-icon">ğŸ“</div>
                        <div><strong>CSV íŒŒì¼ì„ ì„ íƒ</strong>í•˜ê±°ë‚˜ ì—¬ê¸°ë¡œ ë“œë˜ê·¸í•˜ì„¸ìš”</div>
                        <input type="file" id="csvFile" name="csvFile" accept=".csv" required style="display: none;">
                        <div id="fileName" style="margin-top: 1rem; color: #059669;"></div>
                    </div>
                </div>
                
                <div class="form-group">
                    <button type="submit" class="btn btn-primary" id="submitBtn" style="width: 100%; font-size: 1.1rem;">
                        ğŸ“¤ ì‹œê°„í‘œ ì œì¶œí•˜ê¸°
                    </button>
                </div>
                
                <div class="progress" id="progress">
                    <div style="text-align: center; margin-bottom: 0.5rem;">ì—…ë¡œë“œ ì¤‘...</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>
                
                <div id="result"></div>
            </form>
        </div>
        
        <div class="card">
            <h3>ğŸ’¬ ê´‘ê³  ë° ì œíœ´ ë¬¸ì˜</h3>
            <p>íƒ€ì„ë¹Œë” ì•± ë‚´ ê´‘ê³ ë‚˜ ì œíœ´ì— ê´€ì‹¬ì´ ìˆìœ¼ì‹œë‹¤ë©´ ì•„ë˜ ì •ë³´ë¡œ ì—°ë½ì£¼ì„¸ìš”.</p>
            <p style="margin-top: 1rem;">
                ğŸ“§ <strong>ì´ë©”ì¼</strong>: fine.time.table@gmail.com<br>
                ğŸ“ <strong>ì „í™”</strong>: ë¬¸ì˜ ì‹œ ì œê³µ<br>
                ğŸ¢ <strong>íšŒì‚¬</strong>: íŒŒì¸(Fine)
            </p>
        </div>
    </div>
    
    <div class="footer">
        Â© 2025 íŒŒì¸(Fine). ëª¨ë“  ê¶Œë¦¬ ë³´ìœ . | ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨ | ì´ìš©ì•½ê´€
    </div>

    <script>
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('csvFile');
        const fileName = document.getElementById('fileName');
        const submitBtn = document.getElementById('submitBtn');
        const progress = document.getElementById('progress');
        const result = document.getElementById('result');

        // ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì²˜ë¦¬
        uploadArea.addEventListener('click', () => fileInput.click());
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });
        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('dragover');
        });
        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                fileInput.files = files;
                fileName.textContent = `ì„ íƒëœ íŒŒì¼: ${files[0].name}`;
            }
        });

        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                fileName.textContent = `ì„ íƒëœ íŒŒì¼: ${e.target.files[0].name}`;
            }
        });

        // í¼ ì œì¶œ ì²˜ë¦¬
        document.getElementById('submitForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            
            if (!formData.get('csvFile') || formData.get('csvFile').size === 0) {
                showAlert('CSV íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.', 'error');
                return;
            }

            submitBtn.disabled = true;
            submitBtn.textContent = 'ì œì¶œ ì¤‘...';
            progress.style.display = 'block';
            result.innerHTML = '';

            try {
                const response = await fetch('/api/submit-timetable', {
                    method: 'POST',
                    body: formData
                });

                const data = await response.json();

                if (data.success) {
                    showAlert(`
                        <strong>âœ… ì œì¶œ ì™„ë£Œ!</strong><br>
                        ì œì¶œ ID: ${data.submissionId}<br>
                        ê²€í†  í›„ 2-3ì¼ ë‚´ì— ê²°ê³¼ë¥¼ ì•Œë ¤ë“œë¦¬ê² ìŠµë‹ˆë‹¤.<br>
                        ë¬¸ì˜ì‚¬í•­ì€ fine.time.table@gmail.comìœ¼ë¡œ ì—°ë½ì£¼ì„¸ìš”.
                    `, 'success');
                    
                    // í¼ ì´ˆê¸°í™”
                    e.target.reset();
                    fileName.textContent = '';
                } else {
                    showAlert(`âŒ ì œì¶œ ì‹¤íŒ¨: ${data.error}`, 'error');
                }
            } catch (error) {
                showAlert(`âŒ ì—°ê²° ì˜¤ë¥˜: ${error.message}`, 'error');
            }

            submitBtn.disabled = false;
            submitBtn.textContent = 'ğŸ“¤ ì‹œê°„í‘œ ì œì¶œí•˜ê¸°';
            progress.style.display = 'none';
        });

        function showAlert(message, type) {
            result.innerHTML = `<div class="alert alert-${type}">${message}</div>`;
            result.scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>